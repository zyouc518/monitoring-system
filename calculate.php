<?php
$rho = 2.38;
$L = 36;
$DWT = 400000;
$pi = 3.1415926;
$gz0 = array(-0.007, 1.066, 2.159, 3.297, 4.395, 5.177, 5.692, 5.984, 6.058, 5.936, 5.652, 5.237, 4.721, 4.128, 3.473, 2.772);
$s0 = array(0.00, 4.62e-2, 1.87e-1, 4.25e-1, 7.61e-1, 1.18, 1.65, 2.16, 2.69, 3.210751, 3.716373, 4.191495, 4.625995, 5.012105, 5.343761, 5.616251);
$M = $_POST["mass"];
$rat = $_POST["rat"];
$gz1 = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
$s1 = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
$gz2 = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
$s2 = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
$b = (45.165 + sqrt(45.165 * 2 + 4 * 1.833 * $M / ($rho * $L))) / (2 * 1.833);
$h = 1.833 * $b - 45.165;
$dh = 0.2 * $h;
$h2 = $h - $dh;
$b2 = ($h2 + 45.165) / 1.833;
$dm = ($b + $b2) * $dh * $L * $rho / 2;
$dGM = 0.578;
for ($i = 0; $i < 16; $i++) {
    $thea = $i * 5;
    $thearad = $thea * $pi / 180;
    $gz1[$i] = $gz0[$i] - $dGM * cos($thearad);
}
for ($i = 0; $i < 15; $i++) {
    $s1[$i] = $s1[$i] + $pi * ($gz1[$i - 1] + $gz1[$i]) / 72;
}
$mwater = $rat * $M;
$dwater = 0.1 * $h;
for ($i = 1; $i < 16; $i++) {
    $thea = $i * 5;
    $thearad = $thea * $pi / 180;
    $tantrad = tan($thearad);
    $costrad = cos($thearad);
    $mom = $mwater * (3 * $b2 - 3 * $dwater * $tantrad - 2 * sqrt((2 * $b2 * $dwater) / $tantrad) * (1 - $tantrad * 2)) * $costrad / 6;
    $dGZ = $mom * sin($thearad) / 400000;
    $gz2[$i] = $gz1[$i] - $dGZ;
}
for ($i = 1; $i < 16; $i++) {
    $thea = $i * 5;
    $s2[$i - 1] = $s2[$i - 1] + $pi * ($gz2[$i - 1] + $gz2[$i]) / 72.0;
}
for ($i = 0; $i < 16; $i++) {
    echo "$gz1[$i]\n";
}
for ($i = 0; $i < 16; $i++) {
    echo "$gz2[$i]\n";
}
